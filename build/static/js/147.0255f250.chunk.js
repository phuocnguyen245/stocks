"use strict";(self.webpackChunkstocks=self.webpackChunkstocks||[]).push([[147],{5306:(e,n,t)=>{t.d(n,{L:()=>a,W:()=>i});const a=e=>({success:" #f8fff9",error:" #d41834",warning:"#9e5718",primary:"#f5ecfb",secondary:"#D3D3D3",info:"#07595a"}[e]),i=e=>({success:"success.main",error:" #FFB6C1",warning:"#FFDAB9",primary:"#a41bfa",secondary:"#D3D3D3",info:"#1fecf0"}[e])},4065:(e,n,t)=>{t.d(n,{Z:()=>r});var a=t(4270),i=t(184);const r=e=>{let{children:n}=e;return(0,i.jsx)(a.q,{children:n})}},4919:(e,n,t)=>{t.d(n,{Z:()=>s});var a=t(2791),i=t(948),r=t(184);const l=(0,a.forwardRef)(((e,n)=>{const{TextField:t,...a}=e;return(0,r.jsx)(i.h3,{customInput:t,thousandSeparator:",",decimalSeparator:".",...a})}));l.displayName="NumberFormatCustom";const s=l},5690:(e,n,t)=>{t.d(n,{zx:()=>D,__:()=>s,aN:()=>x,Ph:()=>S,Od:()=>F});var a=t(890),i=t(2791),r=t(5306),l=t(184);const s=e=>{let{type:n="primary",children:t,...i}=e;return(0,l.jsx)(a.Z,{color:(0,r.L)(n),bgcolor:(0,r.W)(n),textAlign:"center",paddingX:.75,paddingY:.5,margin:0,borderRadius:1,...i,children:t})};var o=t(691),d=t.n(o),c=t(3967),u=t(6029),m=t(3239);const x=()=>{const e=(0,c.Z)();return(0,i.useEffect)((()=>(d().start(),()=>{d().done()})),[]),(0,l.jsx)(u.Z,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:"180px",position:"absolute",left:0,top:0,bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.05)":"rgba(255,255,255,0.5)",children:(0,l.jsx)(m.Z,{disableShrink:!0,thickness:3})})};var p=t(5403),h=t(8096),g=t(4925),v=t(7198),j=t(9834),Z=t(8550),f=t(3466),b=t(4387),y=t(7071),w=t(1134);const k=e=>{var n;let{control:t,name:a,label:i,options:r,isFetching:s,errors:o,searchTerm:d,onSearch:c,setSelected:x,...k}=e;return t?(0,l.jsx)(w.Qr,{control:t,name:a,render:e=>{var n;let{field:t}=e;return(0,l.jsxs)(h.Z,{fullWidth:!0,children:[(0,l.jsx)(g.Z,{id:"demo-simple-select-label",sx:{color:null!==o&&void 0!==o&&o[a]&&!t.value?"#FF1943":"inherit"},children:i}),(0,l.jsxs)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:i,error:!(null===o||void 0===o||!o[a])&&!t.value,...t,...k,children:[c&&(0,l.jsx)(j.Z,{children:(0,l.jsx)(Z.Z,{size:"small",autoFocus:!0,placeholder:"Type to search...",fullWidth:!0,InputProps:{startAdornment:(0,l.jsx)(f.Z,{position:"start",children:(0,l.jsx)(p.Z,{})})},value:d,onChange:e=>c(e.target.value),onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}})}),null===r||void 0===r?void 0:r.map((e=>(0,l.jsx)(b.Z,{value:e.value,onKeyDown:e=>e.stopPropagation(),onClick:()=>{return n=e,void(null===x||void 0===x||x(n));var n},children:e.name},e.id))),s&&(0,l.jsx)(u.Z,{display:"flex",justifyContent:"center",marginTop:"12px",marginBottom:"12px",children:(0,l.jsx)(m.Z,{size:32,disableShrink:!0,thickness:3})})]}),(null===o||void 0===o?void 0:o[a])&&!t.value&&(0,l.jsx)(y.Z,{sx:{color:"#FF1943"},children:null===o||void 0===o||null===(n=o[a])||void 0===n?void 0:n.message})]})}}):(0,l.jsxs)(h.Z,{fullWidth:!0,children:[(0,l.jsx)(g.Z,{id:"demo-simple-select-label",sx:{color:null!==o&&void 0!==o&&o[a]?"#FF1943":"inherit"},children:i}),(0,l.jsx)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:i,...k,error:!(null===o||void 0===o||!o[a]),children:null===r||void 0===r?void 0:r.map((e=>(0,l.jsx)(b.Z,{value:e.value,children:e.name},e.id)))}),!(null===o||void 0===o||!o[a])&&(0,l.jsx)(y.Z,{sx:{color:"#FF1943"},children:null===o||void 0===o||null===(n=o[a])||void 0===n?void 0:n.message})]})},S=(0,i.memo)(k);var C=t(7047);const F=e=>(0,l.jsx)(C.Z,{...e});t(4919);var I=t(4294);const D=e=>{let{isLoading:n,...t}=e;return(0,l.jsxs)(I.Z,{...t,style:{opacity:n?.5:1},disabled:n,children:[n&&(0,l.jsx)(m.Z,{color:"inherit",sx:{width:"26px !important",height:"26px !important",mr:1,transform:"all 0.2s ease"}}),t.children]})}},1158:(e,n,t)=>{t.d(n,{Z:()=>D});var a=t(558),i=t(1235),r=t(547),l=t(8820),s=t(5397),o=t(3967),d=t(6029),c=t(9281),u=t(5527),m=t(9836),x=t(6890),p=t(5855),h=t(3994),g=t(3382),v=t(3400),j=t(4294),Z=t(6125),f=t(2791),b=t(2606),y=t(1087),w=t(5690),k=t(3033),S=t(184);const C=e=>{let{pagination:n,totalItems:t,onSetPagination:a}=e;return(0,S.jsx)(d.Z,{sx:{width:"100%",maxWidth:"100%"},children:(0,S.jsx)(k.Z,{component:"div",count:t,onPageChange:(e,n)=>{a((e=>({...e,page:n})))},onRowsPerPageChange:e=>{a((n=>({...n,size:parseInt(e.target.value,10)})))},page:n.page,rowsPerPage:n.size,rowsPerPageOptions:[5,10,25,30],showLastButton:!0,showFirstButton:!0})})},F=(0,f.memo)(C),I=e=>{var n;let{data:t,table:k,isLoading:C=!1,totalItems:I,pagination:D,subTable:_,subData:P,onSetPagination:N,onDelete:T,onEdit:R,onView:W}=e;const[B,E]=(0,f.useState)([]),O=(0,o.Z)(),q=e=>{E((()=>B.includes(e)?B.filter((n=>n!==e)):[...B,e]))};return(0,S.jsx)(d.Z,{boxShadow:2,children:(0,S.jsxs)(c.Z,{component:u.Z,sx:{px:2},children:[(0,S.jsxs)(m.Z,{stickyHeader:!0,sx:{position:"relative"},size:"small",children:[(0,S.jsx)(x.Z,{children:(0,S.jsxs)(p.Z,{children:[[..._?[{name:"",title:""}]:[],...k].map(((e,n)=>{let{title:t,render:a,...i}=e;return(0,f.createElement)(h.Z,{sx:{whiteSpace:"nowrap",padding:"8px"},...i,key:"header-".concat(i.name,"-").concat(n)},t)})),(null!==(n=null!==T&&void 0!==T?T:R)&&void 0!==n?n:W)&&(0,S.jsx)(h.Z,{align:"center",sx:{whiteSpace:"nowrap"},width:"10%",children:(0,S.jsx)(b.Z,{id:"label.actions"})})]})}),(0,S.jsx)(g.Z,{children:t.map(((e,n)=>{var t;const o=B.includes(e._id);return(0,S.jsxs)(f.Fragment,{children:[(0,S.jsxs)(p.Z,{onClick:()=>q(null===e||void 0===e?void 0:e._id),sx:{cursor:_?"pointer":"default",transition:"background 0.3s ease","&:hover":{bgcolor:"dark"===O.palette.mode?"grey.800":"primary.light"}},children:[_&&(0,S.jsx)(h.Z,{children:(0,S.jsx)(v.Z,{size:"small",onClick:()=>q(e._id),children:o?(0,S.jsx)(a.Z,{}):(0,S.jsx)(i.Z,{})})}),k.map(((t,a)=>{var i;let{title:r,render:l,...s}=t;return(0,f.createElement)(h.Z,{...s,key:"".concat(a,"-").concat(n),sx:{padding:"8px"}},null!==(i=null===l||void 0===l?void 0:l(e))&&void 0!==i?i:e[s.name])})),(null!==(t=null!==W&&void 0!==W?W:R)&&void 0!==t?t:T)&&(0,S.jsx)(h.Z,{size:"small",children:(0,S.jsxs)(d.Z,{display:"flex",alignItems:"center",justifyContent:"center",gap:.5,children:[W&&(0,S.jsx)(j.Z,{sx:{width:"40px",minWidth:"unset",borderRadius:"100%"},onClick:()=>{W(e)},children:(0,S.jsx)(y.rU,{to:"/stocks/".concat(e.code),style:{display:"flex",alignItems:"center"},target:"_blank",children:(0,S.jsx)(r.Z,{color:"primary"})})}),R&&(0,S.jsx)(j.Z,{color:"info",sx:{width:"40px",minWidth:"unset",borderRadius:"100%"},onClick:()=>{R(e)},children:(0,S.jsx)(l.Z,{})}),T&&(0,S.jsx)(j.Z,{sx:{width:"40px",minWidth:"unset",borderRadius:"100%"},onClick:()=>{T(e)},children:(0,S.jsx)(s.Z,{color:"error"})})]})})]}),_&&(0,S.jsx)(p.Z,{children:(0,S.jsx)(h.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:12,sx:{bgcolor:"dark"===O.palette.mode?"grey.500":"primary.light"},children:(0,S.jsx)(Z.Z,{in:B.includes(e._id),timeout:"auto",unmountOnExit:!0,children:(0,S.jsx)(d.Z,{sx:{margin:1},children:(0,S.jsxs)(m.Z,{size:"small","aria-label":"purchases",children:[(0,S.jsx)(x.Z,{children:(0,S.jsx)(p.Z,{children:null===_||void 0===_?void 0:_.map(((e,t)=>{let{title:a,...i}=e;return(0,f.createElement)(h.Z,{sx:{whiteSpace:"nowrap",padding:"8px"},...i,key:"".concat(i.name,"-").concat(t,"-sub-").concat(n)},a)}))})}),(0,S.jsx)(g.Z,{children:null===P||void 0===P?void 0:P.map(((n,t)=>n.filter((n=>n.code===e.code)).map(((e,n)=>(0,S.jsx)(p.Z,{children:null===_||void 0===_?void 0:_.map(((n,t)=>{var a;let{title:i,render:r,...l}=n;return(0,f.createElement)(h.Z,{...l,key:"sub-item-".concat(e._id,"-").concat(t),sx:{padding:"8px"}},null!==(a=null===r||void 0===r?void 0:r(e))&&void 0!==a?a:e[l.name])}))},"sub-data-".concat(e._id,"-").concat(t,"-").concat(n))))))})]})})})})})]},n)}))}),C&&(0,S.jsx)(w.aN,{})]}),D&&N&&(0,S.jsx)(F,{pagination:D,onSetPagination:N,totalItems:I})]})})},D=(0,f.memo)(I)},8147:(e,n,t)=>{t.r(n),t.d(n,{default:()=>T});var a=t(890),i=t(9281),r=t(5527),l=t(6029),s=t(4294),o=t(9164),d=t(2791),c=t(1158),u=t(4089),m=t(4695),x=t(3542),p=t(4721),h=t(8550),g=t(9955),v=t(1206),j=t(2426),Z=t.n(j),f=t(1134),b=t(4919),y=t(158),w=t(8007);const k=w.Ry().shape({name:w.Z_().required("Name is required"),type:w.Rx().required("Type is required"),date:w.Z_().required("Date is required"),balance:w.Rx().moreThan(0,"Balance be greater than 0").nullable()});var S=t(184);const C=e=>{var n,t;let{open:i,editData:r,refetch:c,handleClose:j}=e;const w=(0,d.useRef)(null),[C]=(0,u.BP)(),[F]=(0,u.RM)(),[I,D]=(0,d.useState)(!0),_=(0,y.VY)(),{register:P,setValue:N,handleSubmit:T,reset:R,formState:{errors:W}}=(0,f.cI)({resolver:(0,m.X)(k)});(0,d.useEffect)((()=>{r&&(N("balance",r.balance),N("date",r.date),N("name",r.name),N("type",r.type?0:1),D(0===r.type))}),[r]),(0,d.useEffect)((()=>{if(i&&w.current){w.current.focus()}N("date",Z()(Date.now()).toISOString()),N("type",0)}),[i]);const B={required:!0,error:!(null===W||void 0===W||!W.balance),helperText:null===(n=W.balance)||void 0===n?void 0:n.message,fullWidth:!0,label:"Balance",sx:{margin:"8px 0"},...P("balance"),onChange:e=>{N("balance",Number(e.target.value.split(",").join("")))}};return(0,S.jsx)(x.Z,{open:i,onClose:j,children:(0,S.jsx)(o.Z,{maxWidth:"sm",sx:{padding:"0 !important"},children:(0,S.jsxs)(l.Z,{py:3,px:0,component:"form",onSubmit:T((async e=>{try{const{name:n,date:t,balance:a}=e,i=I?0:1;let l;l=null!==r&&void 0!==r&&r.balance?await F({name:n,date:t,type:i,balance:Number(a),_id:null===r||void 0===r?void 0:r._id}).unwrap():await C({name:n,date:t,type:i,balance:Number(a)}).unwrap(),l&&(c(),j(),_({message:l.message,variant:"success"}),R())}catch(n){_({message:null===n||void 0===n?void 0:n.message,variant:"error"})}})),id:"stock-form",children:[(0,S.jsx)(l.Z,{paddingBottom:2,paddingX:4,children:(0,S.jsx)(a.Z,{children:"Payment"})}),(0,S.jsx)(p.Z,{}),(0,S.jsxs)(l.Z,{paddingX:4,paddingY:2,component:"form",children:[(0,S.jsx)(h.Z,{fullWidth:!0,label:"Name",autoFocus:!0,inputRef:w,required:!0,sx:{margin:"8px 0"},...P("name"),error:!!W.name,helperText:null===(t=W.name)||void 0===t?void 0:t.message}),(0,S.jsx)(v.M,{label:"Date",sx:{width:"100%",margin:"8px 0"},defaultValue:Z()(Date.now()),onChange:e=>{N("date",Z()(e).toISOString())}}),(0,S.jsx)(b.Z,{...B,TextField:h.Z}),(0,S.jsxs)(l.Z,{display:"flex",alignItems:"center",children:[(0,S.jsx)(a.Z,{children:"Type:"}),(0,S.jsx)(g.Z,{checked:I,required:!0,sx:{margin:"8px 0"},color:"primary",onChange:e=>{N("type",e.target.checked?0:1),D(e.target.checked)}})]})]}),(0,S.jsx)(p.Z,{}),(0,S.jsxs)(l.Z,{textAlign:"end",paddingX:4,paddingTop:3,children:[(0,S.jsx)(s.Z,{color:"warning",variant:"contained",onClick:j,children:"Cancel"}),(0,S.jsx)(s.Z,{variant:"contained",sx:{marginLeft:2},type:"submit",form:"stock-form",autoFocus:!0,children:"Save"})]})]})})})},F=(0,d.memo)(C);var I=t(3720),D=t(5690),_=t(5850),P=t(4065);const N=()=>{var e,n;const[t]=(0,u.U$)(),{open:m,toggle:x}=(0,I.Z)(),[p,h]=(0,d.useState)([]),[g,v]=(0,d.useState)(),[j,Z]=(0,d.useState)({page:0,size:10}),{data:f,isLoading:b,refetch:y}=(0,u.aM)({...j},{refetchOnMountOrArgChange:!0});(0,d.useEffect)((()=>{var e,n,t;null!==f&&void 0!==f&&null!==(e=f.data)&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.length&&h(null===f||void 0===f||null===(t=f.data)||void 0===t?void 0:t.data)}),[f]);const w=[{name:"name",title:"Name"},{name:"type",title:"Type",render:e=>{const n={0:{type:"success",message:"Top up"},1:{type:"error",message:"Withdraw"}},t=e.type;return(0,S.jsx)(D.__,{type:n[t].type,sx:{maxWidth:"100px"},children:n[t].message})}},{name:"balance",title:"Balance",render:e=>(0,S.jsx)(a.Z,{children:(0,_.hA)(e.balance)})}];return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(P.Z,{children:(0,S.jsx)("title",{children:"Payments"})}),(0,S.jsxs)(i.Z,{component:r.Z,sx:{height:"100vh",borderRadius:0},children:[(0,S.jsx)(l.Z,{px:4,pt:2,pb:0,pr:6,display:"flex",alignItems:"center",gap:2,justifyContent:"flex-end",children:(0,S.jsx)(s.Z,{variant:"contained",onClick:x,sx:{mt:8},children:"Created"})}),(0,S.jsxs)(o.Z,{sx:{p:2},children:[(0,S.jsx)(c.Z,{data:p,table:w,isLoading:b,totalItems:null!==(e=null===f||void 0===f||null===(n=f.data)||void 0===n?void 0:n.totalItems)&&void 0!==e?e:0,onDelete:async e=>(await t({_id:e._id}).unwrap().then((async()=>{await y()})),h(p.filter((n=>n._id!==e._id)))),onEdit:async e=>{v(e),x()},pagination:j,onSetPagination:Z}),(0,S.jsx)(F,{open:m,handleClose:x,refetch:y,editData:g})]})]})]})},T=(0,d.memo)(N)},5850:(e,n,t)=>{t.d(n,{QR:()=>s,SX:()=>o,bC:()=>r,hA:()=>l});var a=t(2426),i=t.n(a);const r=(e,n)=>Number(((e-n)/n*100).toFixed(2)),l=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),s=function(e){return Number(Number(e).toFixed(2))},o=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i()().toISOString(),t=i()(e).utcOffset(420).startOf("day");const a=i()(n).utcOffset(420).startOf("day");let r=0;const l=Number(i()(n).format("HH"))>=12?.5:0;if(t.isSame(a))return l;for(;t.isBefore(a);)0!==t.day()&&6!==t.day()&&r++,t=t.add(1,"days");return r+l}}}]);
//# sourceMappingURL=147.0255f250.chunk.js.map