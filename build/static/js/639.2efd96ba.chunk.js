"use strict";(self.webpackChunkstocks=self.webpackChunkstocks||[]).push([[639],{5306:(e,t,i)=>{i.d(t,{L:()=>n,W:()=>r});const n=e=>({success:" #f8fff9",error:" #d41834",warning:"#9e5718",primary:"#f5ecfb",secondary:"#D3D3D3",info:"#07595a"}[e]),r=e=>({success:"success.main",error:" #FFB6C1",warning:"#FFDAB9",primary:"#a41bfa",secondary:"#D3D3D3",info:"#1fecf0"}[e])},4065:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(4270),r=i(184);const l=e=>{let{children:t}=e;return(0,r.jsx)(n.q,{children:t})}},4919:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(2791),r=i(948),l=i(184);const a=(0,n.forwardRef)(((e,t)=>{const{TextField:i,...n}=e;return(0,l.jsx)(r.h3,{customInput:i,thousandSeparator:",",decimalSeparator:".",...n})}));a.displayName="NumberFormatCustom";const o=a},5690:(e,t,i)=>{i.d(t,{zx:()=>I,__:()=>o,aN:()=>x,Ph:()=>S,Od:()=>C});var n=i(890),r=i(2791),l=i(5306),a=i(184);const o=e=>{let{type:t="primary",children:i,...r}=e;return(0,a.jsx)(n.Z,{color:(0,l.L)(t),bgcolor:(0,l.W)(t),textAlign:"center",paddingX:.75,paddingY:.5,margin:0,borderRadius:1,...r,children:i})};var s=i(691),d=i.n(s),c=i(3967),u=i(6029),m=i(3239);const x=()=>{const e=(0,c.Z)();return(0,r.useEffect)((()=>(d().start(),()=>{d().done()})),[]),(0,a.jsx)(u.Z,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:"180px",position:"absolute",left:0,top:0,bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.05)":"rgba(255,255,255,0.5)",children:(0,a.jsx)(m.Z,{disableShrink:!0,thickness:3})})};var p=i(5403),h=i(8096),v=i(4925),g=i(7198),j=i(9834),Z=i(8550),f=i(3466),b=i(4387),y=i(7071),P=i(1134);const k=e=>{var t;let{control:i,name:n,label:r,options:l,isFetching:o,errors:s,searchTerm:d,onSearch:c,setSelected:x,...k}=e;return i?(0,a.jsx)(P.Qr,{control:i,name:n,render:e=>{var t;let{field:i}=e;return(0,a.jsxs)(h.Z,{fullWidth:!0,children:[(0,a.jsx)(v.Z,{id:"demo-simple-select-label",sx:{color:null!==s&&void 0!==s&&s[n]&&!i.value?"#FF1943":"inherit"},children:r}),(0,a.jsxs)(g.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:r,error:!(null===s||void 0===s||!s[n])&&!i.value,...i,...k,children:[c&&(0,a.jsx)(j.Z,{children:(0,a.jsx)(Z.Z,{size:"small",autoFocus:!0,placeholder:"Type to search...",fullWidth:!0,InputProps:{startAdornment:(0,a.jsx)(f.Z,{position:"start",children:(0,a.jsx)(p.Z,{})})},value:d,onChange:e=>c(e.target.value),onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}})}),null===l||void 0===l?void 0:l.map((e=>(0,a.jsx)(b.Z,{value:e.value,onKeyDown:e=>e.stopPropagation(),onClick:()=>{return t=e,void(null===x||void 0===x||x(t));var t},children:e.name},e.id))),o&&(0,a.jsx)(u.Z,{display:"flex",justifyContent:"center",marginTop:"12px",marginBottom:"12px",children:(0,a.jsx)(m.Z,{size:32,disableShrink:!0,thickness:3})})]}),(null===s||void 0===s?void 0:s[n])&&!i.value&&(0,a.jsx)(y.Z,{sx:{color:"#FF1943"},children:null===s||void 0===s||null===(t=s[n])||void 0===t?void 0:t.message})]})}}):(0,a.jsxs)(h.Z,{fullWidth:!0,children:[(0,a.jsx)(v.Z,{id:"demo-simple-select-label",sx:{color:null!==s&&void 0!==s&&s[n]?"#FF1943":"inherit"},children:r}),(0,a.jsx)(g.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:r,...k,error:!(null===s||void 0===s||!s[n]),children:null===l||void 0===l?void 0:l.map((e=>(0,a.jsx)(b.Z,{value:e.value,children:e.name},e.id)))}),!(null===s||void 0===s||!s[n])&&(0,a.jsx)(y.Z,{sx:{color:"#FF1943"},children:null===s||void 0===s||null===(t=s[n])||void 0===t?void 0:t.message})]})},S=(0,r.memo)(k);var w=i(7047);const C=e=>(0,a.jsx)(w.Z,{...e});i(4919);var F=i(4294);const I=e=>{let{isLoading:t,...i}=e;return(0,a.jsxs)(F.Z,{...i,style:{opacity:t?.5:1},disabled:t,children:[t&&(0,a.jsx)(m.Z,{color:"inherit",sx:{width:"26px !important",height:"26px !important",mr:1,transform:"all 0.2s ease"}}),i.children]})}},1158:(e,t,i)=>{i.d(t,{Z:()=>I});var n=i(558),r=i(1235),l=i(547),a=i(8820),o=i(5397),s=i(3967),d=i(6029),c=i(9281),u=i(5527),m=i(9836),x=i(6890),p=i(5855),h=i(3994),v=i(3382),g=i(3400),j=i(4294),Z=i(6125),f=i(2791),b=i(2606),y=i(1087),P=i(5690),k=i(3033),S=i(184);const w=e=>{let{pagination:t,totalItems:i,onSetPagination:n}=e;return(0,S.jsx)(d.Z,{sx:{width:"100%",maxWidth:"100%"},children:(0,S.jsx)(k.Z,{component:"div",count:i,onPageChange:(e,t)=>{n((e=>({...e,page:t})))},onRowsPerPageChange:e=>{n((t=>({...t,size:parseInt(e.target.value,10)})))},page:t.page,rowsPerPage:t.size,rowsPerPageOptions:[5,10,25,30],showLastButton:!0,showFirstButton:!0})})},C=(0,f.memo)(w),F=e=>{var t;let{data:i,table:k,isLoading:w=!1,totalItems:F,pagination:I,subTable:W,subData:_,onSetPagination:D,onDelete:V,onEdit:O,onView:R}=e;const[U,L]=(0,f.useState)([]),B=(0,s.Z)(),T=e=>{L((()=>U.includes(e)?U.filter((t=>t!==e)):[...U,e]))};return(0,S.jsx)(d.Z,{boxShadow:2,children:(0,S.jsxs)(c.Z,{component:u.Z,sx:{px:2},children:[(0,S.jsxs)(m.Z,{stickyHeader:!0,sx:{position:"relative"},size:"small",children:[(0,S.jsx)(x.Z,{children:(0,S.jsxs)(p.Z,{children:[[...W?[{name:"",title:""}]:[],...k].map(((e,t)=>{let{title:i,render:n,...r}=e;return(0,f.createElement)(h.Z,{sx:{whiteSpace:"nowrap",padding:"8px"},...r,key:"header-".concat(r.name,"-").concat(t)},i)})),(null!==(t=null!==V&&void 0!==V?V:O)&&void 0!==t?t:R)&&(0,S.jsx)(h.Z,{align:"center",sx:{whiteSpace:"nowrap"},width:"10%",children:(0,S.jsx)(b.Z,{id:"label.actions"})})]})}),(0,S.jsx)(v.Z,{children:i.map(((e,t)=>{var i;const s=U.includes(e._id);return(0,S.jsxs)(f.Fragment,{children:[(0,S.jsxs)(p.Z,{onClick:()=>T(null===e||void 0===e?void 0:e._id),sx:{cursor:W?"pointer":"default",transition:"background 0.3s ease","&:hover":{bgcolor:"dark"===B.palette.mode?"grey.800":"primary.light"}},children:[W&&(0,S.jsx)(h.Z,{children:(0,S.jsx)(g.Z,{size:"small",onClick:()=>T(e._id),children:s?(0,S.jsx)(n.Z,{}):(0,S.jsx)(r.Z,{})})}),k.map(((i,n)=>{var r;let{title:l,render:a,...o}=i;return(0,f.createElement)(h.Z,{...o,key:"".concat(n,"-").concat(t),sx:{padding:"8px"}},null!==(r=null===a||void 0===a?void 0:a(e))&&void 0!==r?r:e[o.name])})),(null!==(i=null!==R&&void 0!==R?R:O)&&void 0!==i?i:V)&&(0,S.jsx)(h.Z,{size:"small",children:(0,S.jsxs)(d.Z,{display:"flex",alignItems:"center",justifyContent:"center",gap:.5,children:[R&&(0,S.jsx)(j.Z,{sx:{width:"40px",minWidth:"unset",borderRadius:"100%"},onClick:()=>{R(e)},children:(0,S.jsx)(y.rU,{to:"/stocks/".concat(e.code),style:{display:"flex",alignItems:"center"},target:"_blank",children:(0,S.jsx)(l.Z,{color:"primary"})})}),O&&(0,S.jsx)(j.Z,{color:"info",sx:{width:"40px",minWidth:"unset",borderRadius:"100%"},onClick:()=>{O(e)},children:(0,S.jsx)(a.Z,{})}),V&&(0,S.jsx)(j.Z,{sx:{width:"40px",minWidth:"unset",borderRadius:"100%"},onClick:()=>{V(e)},children:(0,S.jsx)(o.Z,{color:"error"})})]})})]}),W&&(0,S.jsx)(p.Z,{children:(0,S.jsx)(h.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:12,sx:{bgcolor:"dark"===B.palette.mode?"grey.500":"primary.light"},children:(0,S.jsx)(Z.Z,{in:U.includes(e._id),timeout:"auto",unmountOnExit:!0,children:(0,S.jsx)(d.Z,{sx:{margin:1},children:(0,S.jsxs)(m.Z,{size:"small","aria-label":"purchases",children:[(0,S.jsx)(x.Z,{children:(0,S.jsx)(p.Z,{children:null===W||void 0===W?void 0:W.map(((e,i)=>{let{title:n,...r}=e;return(0,f.createElement)(h.Z,{sx:{whiteSpace:"nowrap",padding:"8px"},...r,key:"".concat(r.name,"-").concat(i,"-sub-").concat(t)},n)}))})}),(0,S.jsx)(v.Z,{children:null===_||void 0===_?void 0:_.map(((t,i)=>t.filter((t=>t.code===e.code)).map(((e,t)=>(0,S.jsx)(p.Z,{children:null===W||void 0===W?void 0:W.map(((t,i)=>{var n;let{title:r,render:l,...a}=t;return(0,f.createElement)(h.Z,{...a,key:"sub-item-".concat(e._id,"-").concat(i),sx:{padding:"8px"}},null!==(n=null===l||void 0===l?void 0:l(e))&&void 0!==n?n:e[a.name])}))},"sub-data-".concat(e._id,"-").concat(i,"-").concat(t))))))})]})})})})})]},t)}))}),w&&(0,S.jsx)(P.aN,{})]}),I&&D&&(0,S.jsx)(C,{pagination:I,onSetPagination:D,totalItems:F})]})})},I=(0,f.memo)(F)},6639:(e,t,i)=>{i.r(t),i.d(t,{default:()=>$});var n=i(6029),r=i(1889),l=i(2791),a=i(4065),o=i(3967),s=i(890),d=i(2606),c=i(5690),u=i(4089),m=i(6274),x=i(4456),p=i(5850),h=i(184);const v=()=>{const e=(0,o.Z)(),{isOpenSidebar:t}=(0,x.CG)((e=>e.Stocks)),[i,a]=(0,l.useState)({topUp:0,waiting:0,order:0,selling:0,available:0,net:0,profitOrLost:0,investedValue:0,marketValue:0}),{isRefetchStock:v}=(0,x.CG)((e=>e.Stocks)),{data:g,isLoading:j,refetch:Z}=u.te.useGetAssetQuery({},{refetchOnMountOrArgChange:!0}),{data:f,isLoading:b}=m.qR.useGetCurrentStocksQuery({},{refetchOnMountOrArgChange:!0});(0,l.useEffect)((()=>{v&&Z()}),[v]),(0,l.useEffect)((()=>{if(null!==g&&void 0!==g&&g.data){var e;const t=g.data,i=null!==(e=null===t||void 0===t?void 0:t.payment)&&void 0!==e?e:0,n=1e3*(null===t||void 0===t?void 0:t.stock.waiting),r=1e3*(null===t||void 0===t?void 0:t.stock.order),l=1e3*(null===t||void 0===t?void 0:t.stock.sell);a((e=>({...e,topUp:i,waiting:n,order:r,selling:l,available:i+l-r-n})))}}),[g]),(0,l.useEffect)((()=>{var e;if(null!==f&&void 0!==f&&null!==(e=f.data)&&void 0!==e&&e.data){var t,i;let e=0,n=0;null===f||void 0===f||null===(t=f.data)||void 0===t||null===(i=t.data)||void 0===i||i.forEach((t=>{var i,r,l;n+=(null!==(i=null===t||void 0===t?void 0:t.marketPrice)&&void 0!==i?i:0)*(null===t||void 0===t?void 0:t.volume)*1e3,e+=(null!==(r=null===t||void 0===t?void 0:t.averagePrice)&&void 0!==r?r:0)*(null!==(l=null===t||void 0===t?void 0:t.volume)&&void 0!==l?l:0)*1e3})),a((t=>{var i;return{...t,marketValue:(0,p.QR)(n),investedValue:(0,p.QR)(e),profitOrLost:(0,p.QR)((t.selling-t.order+n)/(null!==(i=t.topUp)&&void 0!==i?i:1)*100),net:t.topUp+t.selling-t.order+n}}))}}),[g,f]);const y=(0,l.useMemo)((()=>j&&b),[j,b]),P=()=>(0,h.jsx)(c.Od,{width:"100px",height:"40px",animation:"wave"}),k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Number(t)===i?"equal":t>i?"more":"less",r={more:{type:"success",message:e},equal:{type:"warning",message:e},less:{type:"error",message:e}};return(0,h.jsx)(c.__,{type:r[n].type,fontWeight:600,children:e})};return(0,h.jsx)(n.Z,{position:"fixed",width:"calc(100vw - ".concat(t?"340px":"0px",")"),bottom:0,py:2,display:"flex",alignItems:"center",bgcolor:"dark"===e.palette.mode?"rgba(255,255,255,0.05)":"#f9f3fe",boxShadow:"rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px",sx:{transition:"all .2s ease-in-out"},children:(0,h.jsxs)(r.ZP,{container:!0,alignItems:"center",columnSpacing:2,rowSpacing:.75,justifyContent:"center",children:[(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(r.ZP,{container:!0,alignItems:"center",children:[(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(s.Z,{fontWeight:600,children:[(0,h.jsx)(d.Z,{id:"label.top.up"}),":\xa0"]})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsx)(s.Z,{fontWeight:600,children:y?(0,h.jsx)(P,{}):k((0,p.hA)(i.topUp))})})]})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(r.ZP,{container:!0,alignItems:"center",children:[(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(s.Z,{fontWeight:600,children:[(0,h.jsx)(d.Z,{id:"label.available.cash"}),":\xa0"]})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsx)(s.Z,{children:y?(0,h.jsx)(P,{}):k((0,p.hA)(i.available))})})]})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(r.ZP,{container:!0,alignItems:"center",children:[(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(s.Z,{fontWeight:600,children:[(0,h.jsx)(d.Z,{id:"label.net.asset.value"}),":\xa0"]})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsx)(s.Z,{children:y?(0,h.jsx)(P,{}):k((0,p.hA)(i.net))})})]})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(r.ZP,{container:!0,alignItems:"center",children:[(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(s.Z,{fontWeight:600,children:[(0,h.jsx)(d.Z,{id:"label.profit.loss"}),":\xa0"]})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsx)(s.Z,{children:y?(0,h.jsx)(P,{}):k("".concat(i.profitOrLost||0,"%"),i.profitOrLost)})})]})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(r.ZP,{container:!0,alignItems:"center",children:[(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(s.Z,{fontWeight:600,children:[(0,h.jsx)(d.Z,{id:"label.invested.value"}),":\xa0"]})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsx)(s.Z,{fontWeight:600,children:y?(0,h.jsx)(P,{}):k((0,p.hA)(i.investedValue),i.profitOrLost)})})]})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(r.ZP,{container:!0,alignItems:"center",children:[(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsxs)(s.Z,{fontWeight:600,children:[(0,h.jsx)(d.Z,{id:"label.market.value"}),":\xa0"]})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsx)(s.Z,{children:y?(0,h.jsx)(P,{}):k((0,p.hA)(i.marketValue),i.profitOrLost)})})]})})]})})};var g=i(4294),j=i(3720),Z=i(3542),f=i(9164);const b=e=>{let{modalStatus:t,toggle:i,onSetModalStatus:r}=e;return(0,h.jsx)(Z.Z,{open:t.open,onClose:()=>{r({open:!1,isBuy:0})},children:(0,h.jsx)(f.Z,{maxWidth:"lg",children:(0,h.jsxs)(n.Z,{padding:4,children:[(0,h.jsx)(s.Z,{variant:"h5",children:(0,h.jsx)(d.Z,{id:"text.which.status.do.you.want.to.create"})}),(0,h.jsxs)(n.Z,{display:"flex",justifyContent:"center",alignItems:"center",gap:3,mt:2,children:[(0,h.jsx)(g.Z,{variant:"contained",color:"secondary",sx:{color:"text.primary"},onClick:()=>{i(),r({open:!1,isBuy:1})},children:(0,h.jsx)(d.Z,{id:"label.buying"})}),(0,h.jsx)(g.Z,{variant:"contained",onClick:()=>{i(),r({open:!1,isBuy:0})},children:(0,h.jsx)(d.Z,{id:"label.selling"})})]})]})})})},y=(0,l.memo)(b);var P=i(4695),k=i(4721),S=i(8550),w=i(3400),C=i(1206),F=i(2426),I=i.n(F),W=i(1134),_=i(914),D=i(8007);const V=D.Ry().shape({code:D.Z_().required("Code is required"),volume:D.Rx().moreThan(0,"Volume must be greater than 0").required("Volume is required"),orderPrice:D.Rx().moreThan(0,"Order Price must be greater than 0").nullable(),sellPrice:D.Rx().moreThan(0,"Selling Price must be greater than 0").nullable(),date:D.Z_().required("Date is required")});var O=i(158);const R={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let U;const L=new Uint8Array(16);function B(){if(!U&&(U="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!U))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return U(L)}const T=[];for(let J=0;J<256;++J)T.push((J+256).toString(16).slice(1));function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return T[e[t+0]]+T[e[t+1]]+T[e[t+2]]+T[e[t+3]]+"-"+T[e[t+4]]+T[e[t+5]]+"-"+T[e[t+6]]+T[e[t+7]]+"-"+T[e[t+8]]+T[e[t+9]]+"-"+T[e[t+10]]+T[e[t+11]]+T[e[t+12]]+T[e[t+13]]+T[e[t+14]]+T[e[t+15]]}const E=function(e,t,i){if(R.randomUUID&&!t&&!e)return R.randomUUID();const n=(e=e||{}).random||(e.rng||B)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=n[e];return t}return M(n)};var N=i(8087);const A=(0,i(9201).Z)((0,h.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),z=e=>{var t,i,a,o,u;let{open:v,status:g,handleClose:j,addData:b}=e;const y=(0,l.useRef)(null),F=(0,x.TL)(),{sellStock:D}=(0,x.CG)((e=>e.Stocks)),[R,{isLoading:U}]=(0,m.$B)(),L=(0,O.VY)(),B={id:E(),name:"",price:0,volume:0},[T,M]=(0,l.useState)({take:[{id:E(),name:"",price:0,volume:0}],stop:[{id:E(),name:"",price:0,volume:0}]}),{register:z,setValue:q,getValues:Y,handleSubmit:Q,reset:G,control:X,formState:{errors:H}}=(0,W.cI)({resolver:(0,P.X)(V)}),{data:K}=m.qR.useGetCurrentStocksQuery({});(0,l.useEffect)((()=>{if(v&&y.current){y.current.focus()}q(1===g?"sellPrice":"orderPrice",null),D&&(q("code",D.code),q("volume",D.volume)),q("date",I()(Date.now()).toISOString())}),[v,g,D]);const $=async e=>{try{const{code:t,volume:i,orderPrice:n,sellPrice:r}=e,l=await R({code:t.toUpperCase(),volume:i,date:Y("date"),...1===g?{orderPrice:n}:{sellPrice:r},status:1===g?"Buy":"Sell",take:T.take,stop:T.stop}).unwrap();if(l.data)return G(),F((0,_.Ze)(!0)),F((0,_.DV)(void 0)),L({message:l.message,variant:"success"}),M({take:[{id:E(),name:"",price:0,volume:0}],stop:[{id:E(),name:"",price:0,volume:0}]}),b({...l.data})}catch(t){L({message:t.data.message,variant:"error"})}},J=()=>{F((0,_.DV)(void 0)),j()},ee=(0,l.useMemo)((()=>{var e,t,i,n;return 0===g&&null!==K&&void 0!==K&&null!==(e=K.data)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.length?null===K||void 0===K||null===(i=K.data)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.map((e=>({id:e._id,name:e.code,value:e.code}))):[]}),[g]),te=(e,t,i)=>{const n=e.target.name,r=Number(e.target.value);M((e=>({...e,[t]:e[t].map((e=>e.id===i?{...e,[n]:r}:{...e}))})))},ie=e=>{var t,i;const n=e.target.name,r=Number(e.target.value);q(n,r);const l=null!==(t=Y("volume"))&&void 0!==t?t:0,a=null!==(i=Y("orderPrice"))&&void 0!==i?i:0;M({stop:[{id:E(),name:"",price:(0,p.QR)(96*(null!==a&&void 0!==a?a:0)/100),volume:l/2},{id:E(),name:"",price:(0,p.QR)(92*(null!==a&&void 0!==a?a:0)/100),volume:l}],take:[{id:E(),name:"",price:(0,p.QR)(104*(null!==a&&void 0!==a?a:0)/100),volume:l}]})};return(0,h.jsx)(Z.Z,{open:null!==(t=Boolean(D))&&void 0!==t?t:v,onClose:J,onKeyUp:e=>{"Enter"===e.key&&Q($)},children:(0,h.jsx)(f.Z,{maxWidth:"sm",sx:{padding:"0 !important"},children:(0,h.jsxs)(n.Z,{py:3,px:0,component:"form",onSubmit:Q($),id:"stock-form",children:[(0,h.jsx)(n.Z,{paddingBottom:2,paddingX:4,children:(0,h.jsxs)(s.Z,{children:[1!==g||K?(0,h.jsx)(d.Z,{id:"label.selling"}):(0,h.jsx)(d.Z,{id:"label.buying"}),"\xa0",(0,h.jsx)(d.Z,{id:"label.stock"})]})}),(0,h.jsx)(k.Z,{}),(0,h.jsxs)(n.Z,{paddingX:4,paddingY:2,component:"form",children:[1===g?(0,h.jsx)(S.Z,{fullWidth:!0,label:(0,h.jsx)(d.Z,{id:"label.code"}),autoFocus:!0,inputRef:y,inputProps:{autoFocus:!0,maxLength:3,style:{textTransform:"uppercase"}},required:!0,sx:{margin:"8px 0"},...z("code"),error:!!H.code,helperText:null===(i=H.code)||void 0===i?void 0:i.message}):(0,h.jsx)(c.Ph,{control:X,name:"code",label:(0,h.jsx)(d.Z,{id:"label.code"}),options:ee}),(0,h.jsx)(C.M,{label:(0,h.jsx)(d.Z,{id:"label.date"}),sx:{width:"100%",margin:"8px 0"},defaultValue:I()(Date.now()),onChange:e=>{q("date",I()(e).toISOString())}}),(0,h.jsxs)(r.ZP,{container:!0,columnSpacing:.75,children:[(0,h.jsx)(r.ZP,{item:!0,md:6,children:(0,h.jsx)(S.Z,{fullWidth:!0,label:(0,h.jsx)(d.Z,{id:"label.volume"}),type:"number",inputProps:{min:0},required:!0,sx:{margin:"8px 0"},...z("volume"),onChange:ie,error:!!H.volume,helperText:null===(a=H.volume)||void 0===a?void 0:a.message})}),(0,h.jsx)(r.ZP,{item:!0,md:6,children:1===g?(0,h.jsx)(S.Z,{fullWidth:!0,label:(0,h.jsx)(d.Z,{id:"label.order.price"}),type:"number",required:!0,sx:{margin:"8px 0"},...z("orderPrice"),onChange:ie,error:!(null===H||void 0===H||!H.orderPrice),helperText:null===(o=H.orderPrice)||void 0===o?void 0:o.message}):(0,h.jsx)(S.Z,{fullWidth:!0,label:(0,h.jsx)(d.Z,{id:"label.selling.price"}),type:"number",required:!0,sx:{margin:"8px 0"},...z("sellPrice"),error:!(null===H||void 0===H||!H.sellPrice),helperText:null===(u=H.sellPrice)||void 0===u?void 0:u.message})})]}),1===g&&!K&&(0,h.jsxs)(n.Z,{mt:.5,children:[(0,h.jsx)(s.Z,{mb:.75,children:"Takes"}),T.take.map(((e,t)=>(0,h.jsxs)(r.ZP,{container:!0,pb:1,alignItems:"center",justifyContent:"space-between",columnSpacing:.75,children:[(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsx)(S.Z,{fullWidth:!0,label:"Volume",name:"volume",value:e.volume,onChange:t=>te(t,"take",e.id),type:"number",inputProps:{step:"0.1"}})}),(0,h.jsx)(r.ZP,{item:!0,children:(0,h.jsx)(S.Z,{fullWidth:!0,label:"Price",name:"price",value:e.price,onChange:t=>te(t,"take",e.id),type:"number",inputProps:{step:"0.1"}})}),(0,h.jsx)(r.ZP,{item:!0,children:0===t?(0,h.jsx)(w.Z,{sx:{bgcolor:0===t?"primary.main":"error.main",p:0},onClick:()=>{return e="take",M((t=>({...t,[e]:[...t[e],B]})));var e},children:(0,h.jsx)(N.Z,{color:"inherit",sx:{width:"32px",height:"32px"}})}):(0,h.jsx)(w.Z,{sx:{bgcolor:0===t?"primary.main":"error.main",p:0},onClick:()=>{return t="take",i=e.id,M((e=>({...e,[t]:e[t].filter((e=>e.id!==i))})));var t,i},children:(0,h.jsx)(A,{sx:{width:"32px",height:"32px"}})})})]},e.id)))]}),1===g&&!K&&(0,h.jsxs)(n.Z,{mt:.5,children:[(0,h.jsx)(s.Z,{mb:.75,children:"Stops"}),T.stop.map(((e,t)=>(0,h.jsxs)(r.ZP,{container:!0,pb:1,alignItems:"center",justifyContent:"space-between",columnSpacing:.75,children:[(0,h.jsx)(r.ZP,{item:!0,md:6,children:(0,h.jsx)(S.Z,{fullWidth:!0,label:"Volume",name:"volume",value:e.volume,onChange:t=>te(t,"stop",e.id),type:"number",inputProps:{step:"0.1"},disabled:!0})}),(0,h.jsx)(r.ZP,{item:!0,md:6,children:(0,h.jsx)(S.Z,{fullWidth:!0,label:"Price",name:"price",value:e.price,onChange:t=>te(t,"stop",e.id),type:"number",inputProps:{step:"0.1"},disabled:!0})})]},e.id)))]})]}),(0,h.jsx)(k.Z,{}),(0,h.jsxs)(n.Z,{textAlign:"end",paddingX:4,paddingTop:3,children:[(0,h.jsx)(c.zx,{color:"secondary",variant:"contained",onClick:J,children:(0,h.jsx)(d.Z,{id:"label.cancel"})}),(0,h.jsx)(c.zx,{isLoading:U,variant:"contained",sx:{marginLeft:2},type:"submit",form:"stock-form",autoFocus:!0,children:(0,h.jsx)(d.Z,{id:"label.save"})})]})]})})})},q=(0,l.memo)(z),Y=e=>{let{modalStatus:t,onSetModalStatus:i,openConfirmModal:r}=e;const l=(0,j.Z)();return(0,h.jsxs)(n.Z,{px:4,py:2,display:"flex",alignItems:"center",gap:2,justifyContent:"flex-end",children:[(0,h.jsx)(g.Z,{variant:"contained",onClick:r,children:(0,h.jsx)(d.Z,{id:"label.create"})}),(0,h.jsx)(y,{modalStatus:t,onSetModalStatus:i,toggle:l.toggle}),(0,h.jsx)(q,{open:l.open,handleClose:l.toggle,addData:()=>{l.toggle()},status:t.isBuy})]})};var Q=i(5306),G=i(1158);const X=()=>{var e,t;const[i]=(0,m.rE)(),n=(0,x.TL)(),{isRefetchStock:r}=(0,x.CG)((e=>e.Stocks)),[a,o]=(0,l.useState)([]),[u,v]=(0,l.useState)([]),[j,Z]=(0,l.useState)(),[f,b]=(0,l.useState)({page:0,size:10}),{data:y,isLoading:P,refetch:k}=(0,m.en)({},{refetchOnMountOrArgChange:!0});(0,l.useEffect)((()=>{var e;null!==y&&void 0!==y&&null!==(e=y.data)&&void 0!==e&&e.data&&(o(y.data.data.map((e=>{var t,i;return{...e,orderPrice:Number(null===(t=e.orderPrice)||void 0===t?void 0:t.toFixed(2)),investedValue:Number((null!==(i=null===e||void 0===e?void 0:e.investedValue)&&void 0!==i?i:0).toFixed(2))}}))),v(Object.values(y.data.data).map((e=>{var t;return null===(t=e.stocks)||void 0===t?void 0:t.map((e=>({...e,t:(0,p.SX)(e.date)})))}))))}),[y]),(0,l.useEffect)((()=>{r&&k().unwrap().then((()=>n((0,_.Ze)(!1)))).catch((e=>console.log(e)))}),[r]);const w=(0,l.useCallback)(((e,t)=>{const i=0===e?"warning":e>0?"success":"error",n=e>0?"+":"";return t?(0,h.jsxs)(s.Z,{color:(0,Q.W)(i),fontWeight:600,fontSize:14,children:[n,(0,p.hA)(1e3*e)]}):(0,h.jsxs)(c.__,{type:i,fontSize:14,children:[e.toFixed(2),"%"]})}),[]),C=[{name:"code",title:(0,h.jsx)(d.Z,{id:"label.code"}),width:"10%"},{name:"volume",title:(0,h.jsx)(d.Z,{id:"label.volume"}),width:"15%"},{name:"averagePrice",title:(0,h.jsx)(d.Z,{id:"label.average"}),width:"15%"},{name:"marketPrice",title:(0,h.jsx)(d.Z,{id:"label.market.price"}),width:"15%",render:e=>{var t,i,n;return(0,h.jsx)(h.Fragment,{children:(null===j||void 0===j||null===(t=j.code)||void 0===t?void 0:t.toUpperCase())===(null===e||void 0===e||null===(i=e.code)||void 0===i?void 0:i.toUpperCase())?(0,h.jsx)(S.Z,{sx:[{"& .MuiInputBase-root":{height:"36px"}}],name:"marketPrice",value:null!==(n=null===j||void 0===j?void 0:j.marketPrice)&&void 0!==n?n:0,onChange:e=>(e=>{const t=e.target.name,i="code"===t?e.target.value.toUpperCase():Number(e.target.value);if(null!==j&&void 0!==j&&j.code){const e={...j,[t]:i,investedValue:"volume"===t?i*Number(null===j||void 0===j?void 0:j.marketPrice):"marketPrice"===t?i*j.volume:j.investedValue,ratio:"marketPrice"===t?(0,p.bC)(i,j.orderPrice):j.ratio};Z(e),o(a.map((t=>t.code.toUpperCase()===e.code.toUpperCase()?{...e}:{...t})))}})(e),type:"number",autoFocus:!0,inputProps:{step:1}}):null===e||void 0===e?void 0:e.marketPrice})}},{name:"ratio",title:(0,h.jsx)(d.Z,{id:"label.profit.loss"}),width:"10%",render:e=>(0,h.jsx)(h.Fragment,{children:w(100*Number(null===e||void 0===e?void 0:e.ratio))})},{name:"investedValue",title:(0,h.jsx)(d.Z,{id:"label.profit.loss.value"}),align:"left",width:"20%",render:e=>{var t;return(0,h.jsxs)(h.Fragment,{children:[" ",w(Number(null===(t=e.investedValue)||void 0===t?void 0:t.toFixed(2)),"gain")]})}}],F=[{name:"volume",title:(0,h.jsx)(d.Z,{id:"label.volume"})},{name:"orderPrice",title:(0,h.jsx)(d.Z,{id:"label.order"})},{name:"",title:"T+",align:"center",render:e=>(0,h.jsx)(h.Fragment,{children:e.t})},{name:"",title:"Take 1",render:e=>(0,h.jsx)(h.Fragment,{children:e.take[0].price})},{name:"",title:"Take 2",render:e=>{var t;return(0,h.jsx)(h.Fragment,{children:(null===(t=e.take[1])||void 0===t?void 0:t.price)||0})}},{name:"",title:"Stop 1",render:e=>{var t;return(0,h.jsx)(h.Fragment,{children:(null===(t=e.stop[0])||void 0===t?void 0:t.price)||0})}},{name:"",title:"Stop 2",render:e=>{var t;return(0,h.jsx)(h.Fragment,{children:(null===(t=e.stop[1])||void 0===t?void 0:t.price)||0})}},{name:"",title:(0,h.jsx)(d.Z,{id:"label.sell"}),align:"center",width:"100px",render:e=>{var t;return(null!==(t=null===e||void 0===e?void 0:e.t)&&void 0!==t?t:0)>=2.5?(0,h.jsx)(g.Z,{variant:"contained",onClick:()=>(e=>{n((0,_.DV)(e))})(e),children:(0,h.jsx)(s.Z,{children:(0,h.jsx)(d.Z,{id:"label.sell"})})}):(0,h.jsx)(h.Fragment,{})}}];return(0,h.jsx)(G.Z,{data:a,table:C,isLoading:P,totalItems:null!==(e=null===y||void 0===y||null===(t=y.data)||void 0===t?void 0:t.totalItems)&&void 0!==e?e:0,pagination:f,onSetPagination:b,onView:e=>{},subTable:F,subData:u})};var H=i(9955);const K=()=>{var e,t;const i=(0,x.TL)(),{isRefetchStock:n}=(0,x.CG)((e=>e.Stocks)),[r]=(0,m.aA)(),[a]=(0,m.WU)(),o=(0,O.VY)(),[s,u]=(0,l.useState)([]),[v,g]=(0,l.useState)(),[j,Z]=(0,l.useState)({page:0,size:10}),{data:f,isLoading:b,refetch:y}=(0,m.wZ)({...j},{refetchOnMountOrArgChange:!0});(0,l.useEffect)((()=>{var e,t;if(null!==f&&void 0!==f&&null!==(e=f.data)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.length){var i;const e=null===f||void 0===f||null===(i=f.data)||void 0===i?void 0:i.data.map((e=>({...e,t:(0,p.SX)(e.date)})));u(e)}}),[f]),(0,l.useEffect)((()=>{n&&y().unwrap().then((()=>i((0,_.Ze)(!1)))).catch((e=>console.log(e)))}),[n]);const P=e=>{const t=e.target.name,i=e.target.value;let n="";switch(t){case"code":n=i.toUpperCase();break;case"status":n=e.target.checked?"Buy":"Sell";break;default:n=Number(i)}if(null!==v&&void 0!==v&&v._id){const e={...v,[t]:n};return g(e),u(s.map((t=>t._id===e._id?{...e}:{...t})))}},k=[{name:"code",title:(0,h.jsx)(d.Z,{id:"label.code"}),width:"10%"},{name:"date",title:(0,h.jsx)(d.Z,{id:"label.date"}),width:"1200px",render:e=>(0,h.jsx)(h.Fragment,{children:I()(e.date).format("DD/MM/YYYY")})},{name:"volume",title:(0,h.jsx)(d.Z,{id:"label.volume"}),width:"25%",render:e=>(0,h.jsx)(h.Fragment,{children:(null===v||void 0===v?void 0:v._id)===e._id?(0,h.jsx)(S.Z,{sx:[{"& .MuiInputBase-root":{height:"36px",minWidth:"80px"}}],name:"volume",value:e.volume,onChange:e=>P(e),type:"number",fullWidth:!0,inputProps:{step:1}}):e.volume})},{name:"orderPrice",title:(0,h.jsx)(d.Z,{id:"label.order"}),width:"25%",render:e=>(0,h.jsx)(h.Fragment,{children:(null===v||void 0===v?void 0:v._id)===e._id?(0,h.jsx)(S.Z,{sx:[{width:"120px",padding:"0"},{"& .MuiInputBase-root":{height:"36px",minWidth:"80px"}}],name:"orderPrice",value:e.orderPrice,onChange:e=>P(e),type:"number",inputProps:{step:"0.1"},autoFocus:!0,fullWidth:!0}):e.orderPrice})},{name:"sellPrice",title:(0,h.jsx)(d.Z,{id:"label.sell"}),width:"10%"},{name:"status",title:(0,h.jsx)(d.Z,{id:"label.status"}),width:"10%",render:e=>(0,h.jsx)(h.Fragment,{children:(null===v||void 0===v?void 0:v._id)===e._id?(0,h.jsx)(H.Z,{sx:{height:"36px"},name:"status",color:"secondary",checked:"Buy"===e.status,onChange:e=>P(e)}):(0,h.jsx)(c.__,{type:"BUY"===e.status.toUpperCase()?"success":"primary",fontSize:14,children:e.status})})}];return(0,h.jsx)(G.Z,{data:s,table:k,isLoading:b,totalItems:null!==(e=null===f||void 0===f||null===(t=f.data)||void 0===t?void 0:t.totalItems)&&void 0!==e?e:0,onDelete:async e=>{try{if(await a({_id:e._id}).unwrap())return await y(),i((0,_.Ze)(!0)),u(s.filter((t=>t._id!==e._id)))}catch(t){o({message:t.data.message,variant:"error"})}},onEdit:async e=>{const t={_id:"",code:"",date:I()(Date.now()).format("DD/MM/YYYY"),volume:0,orderPrice:0,marketPrice:0,status:"Buy",ratio:0,sellPrice:0,stop:[],take:[]};try{if(null!==v&&void 0!==v&&v._id){const n=await r(e).unwrap();return n.data&&(i((0,_.Ze)(!0)),o({message:n.message,variant:"success"})),g(t)}return g(e)}catch(n){return o({message:n.data.message,variant:"error"}),g(t)}},pagination:j,onSetPagination:Z})},$=()=>{const[e,t]=(0,l.useState)({isBuy:1,open:!1});return(0,h.jsxs)(n.Z,{height:"100%",position:"relative",minHeight:"calc(100vh - 112px)",pt:0,pb:"112px",children:[(0,h.jsx)(a.Z,{children:(0,h.jsx)("title",{children:"Stocks"})}),(0,h.jsx)(Y,{openConfirmModal:()=>t({...e,open:!0}),modalStatus:e,onSetModalStatus:t}),(0,h.jsx)(n.Z,{px:2,children:(0,h.jsxs)(r.ZP,{container:!0,columnSpacing:2,rowGap:2,children:[(0,h.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:12,lg:5,children:(0,h.jsx)(K,{})}),(0,h.jsx)(r.ZP,{item:!0,xs:12,sm:12,md:12,lg:7,children:(0,h.jsx)(X,{})})]})}),(0,h.jsx)(v,{})]})}},5850:(e,t,i)=>{i.d(t,{QR:()=>o,SX:()=>s,bC:()=>l,hA:()=>a});var n=i(2426),r=i.n(n);const l=(e,t)=>Number(((e-t)/t*100).toFixed(2)),a=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),o=function(e){return Number(Number(e).toFixed(2))},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r()().toISOString(),i=r()(e).utcOffset(420).startOf("day");const n=r()(t).utcOffset(420).startOf("day");let l=0;const a=Number(r()(t).format("HH"))>=12?.5:0;if(i.isSame(n))return a;for(;i.isBefore(n);)0!==i.day()&&6!==i.day()&&l++,i=i.add(1,"days");return l+a}},8087:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(9201),r=i(184);const l=(0,n.Z)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")}}]);
//# sourceMappingURL=639.2efd96ba.chunk.js.map